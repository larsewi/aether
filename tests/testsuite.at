AT_INIT
AT_COLOR_TESTS

m4_define([FIND_AETHER], [[set -x
if test "x${AUTOTEST_PATH}" == "x${at_testdir}"; then
    aether="${abs_top_builddir}/cli/aether"
    compare="$(dirname ${aether})/.libs/lt-aether"
else
    LD_LIBRARY_PATH="${AUTOTEST_PATH}/../lib" export LD_LIBRARY_PATH
    aether="${AUTOTEST_PATH}/aether"
    compare="$(aether)"
fi]])

AT_SETUP([aether --help])
FIND_AETHER
AT_CHECK_UNQUOTED(["${abs_top_builddir}"/cli/aether --help], , [aether 0.0.1

Options:
  --filename input file
  --debug    enable debug logging
  --help     print help message

Report bugs to: <https://github.com/larsewi/aether/issues>
aether home page: <https://github.com/larsewi/aether>
])
AT_CLEANUP

AT_SETUP([string_lib.c:StringEqual])
AT_CHECK(["${abs_top_builddir}"/utils/test_string_lib StringEqual])
AT_CLEANUP

AT_SETUP([string_lib.c:StringFormat])
AT_CHECK(["${abs_top_builddir}"/utils/test_string_lib StringFormat])
AT_CLEANUP
